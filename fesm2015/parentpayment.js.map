{"version":3,"file":"parentpayment.js","sources":["../../../projects/parentpayment/src/lib/parentpayment.service.ts","../../../projects/parentpayment/src/lib/payment-details/payment-details.component.html","../../../projects/parentpayment/src/lib/payment-details/payment-details.component.ts","../../../projects/parentpayment/src/lib/parentpayment.component.ts","../../../projects/parentpayment/src/lib/payment-details/payment-card/payment-card.component.ts","../../../projects/parentpayment/src/lib/payment-details/payment-card/payment-card.component.html","../../../projects/parentpayment/src/lib/payment-details/payment-bank/payment-bank.component.ts","../../../projects/parentpayment/src/lib/payment-details/payment-bank/payment-bank.component.html","../../../projects/parentpayment/src/lib/parentpayment.module.ts","../../../projects/parentpayment/src/public-api.ts","../../../projects/parentpayment/src/parentpayment.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ParentpaymentService {\n\n  constructor() { }\n}\n","<div class=\"row pay-body\">\n    <div class=\"pay-title-box\">\n        <div class=\"pay-title\">Payment details</div>\n        <div class=\"pay-details\">Please fill the information below about your payment method</div>\n    </div>\n    <div class=\"pay-selection\">\n\n        <div class=\"col pay-width\">Pay with</div>\n        <div class=\"row width-q\">\n            <div class=\"col pay-btn\" (click)=\"paymentSelected(1)\"><input type=\"radio\"\n                    name=\"payWith\" id=\"1\"><span class=\"pay-btn-text\">{{paymentMethodType }}</span>\n                <img class=\"icon-align\" src=\"\" alt=\"\">\n            </div>\n            <div *ngIf=\"paymentMethodAllowed >= 2\" class=\"col pay-btn\"\n                (click)=\"paymentSelected(2)\"><input type=\"radio\" name=\"payWith\" id=\"2\"><span class=\"pay-btn-text\">Debit or credit card</span><img class=\"icon-align\"\n                    src=\"\" alt=\"\"></div>\n            <!-- <div *ngIf=\"userData.isStripeEnabled && userData.isWalletPayEnabled && canDoWalletPay\" class=\"col pay-btn\"\n                [ngClass]=\"{'pay-btn-active' : paymentMethod == '3'}\" (click)=\"paymentSelected(3)\"><input type=\"radio\"\n                    name=\"payWith\" id=\"3\"><span class=\"pay-btn-text\">{{ walletPayDesc }}</span><img\n                    class=\"icon-align\" src=\"\" alt=\"\">\n            </div> -->\n\n        </div>\n        <lib-payment-bank-details *ngIf=\"paymentMethod == '1'\"></lib-payment-bank-details>\n        <lib-payment-card-details *ngIf=\"paymentMethod == '2'\"></lib-payment-card-details>\n        <!-- <app-payment-card *ngIf=\"paymentMethod == '2'\"></app-payment-card> -->\n\n        <div class=\"col pay-btn\" (click)=\"paymentSelected(3)\">\n            <input type=\"radio\" name=\"payWith\" id=\"3\"><span class=\"pay-btn-text\">{{ walletPayDesc }}</span><img class=\"icon-align\" src=\"\" alt=\"\">\n        </div>\n\n\n\n    </div>\n</div>\n<div class=\"row pay-body error-body\" *ngIf=\"paymentMethod == 0\">\n    <div class=\"error-title\">\n        Oops. Sorry, we are unable to process your payment.\n    </div>\n    <div class=\"error-content\">\n        An error has occurred while attempting to process your order. Please try again or try another payment method.\n    </div>\n</div>","import { Component, OnInit, Output, EventEmitter, Input } from '@angular/core';\ndeclare var window :any;\n\n\n\n@Component({\n  selector: 'lib-payment-details',\n  templateUrl: './payment-details.component.html',\n  styleUrls: ['./payment-details.component.scss']\n})\nexport class PaymentDetailsComponent implements OnInit {\n\n\n  paymentMethodType: any = 'Bank transfer';\n\n  userData: any;\n  canDoWalletPay: boolean = false;\n  walletPayLogoName: string = '';\n  walletPayDesc: string = '';\n  walletDetails: any;\n  paymentMethod: any = 1;\n\n  @Output() emitter: EventEmitter<string> = new EventEmitter<string>();\n  @Output() payEmitter: EventEmitter<any> = new EventEmitter<any>();\n  \n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n\n  canWalletPay() {\n    this.canDoWalletPay = false;\n    this.userData.isWalletPayEnabled = true;\n    if (this.userData.isStripeEnabled && this.userData.isWalletPayEnabled) {\n        //https://stripe.com/docs/js/initializing\n        const stripe = window.Stripe(atob(this.userData.pk_token), {stripeAccount: this.userData.stripeConnectedAccountId});\n        const paymentRequest = stripe.paymentRequest({\n            country: this.userData.clientDetails.countryNameCode,\n            currency: this.userData.currencyCode.toLowerCase(),\n            total: {\n                label: 'Demo total',\n                amount: 1,\n            },\n            requestPayerName: true,\n            requestPayerEmail: true,\n        });\n  \n        (async () => {\n            // Check the availability of the Payment Request API first.\n            const result = await paymentRequest.canMakePayment();\n            console.log('canMakePayment', result);\n            if (result) {\n                this.canDoWalletPay = true;\n                if (result.applePay) {\n                    this.walletPayDesc = 'Apple Pay';\n                    this.walletPayLogoName = 'ApplePay';\n                } else if (result.googlePay) {\n                    this.walletPayDesc = 'Google Pay';\n                    this.walletPayLogoName = 'GooglePay';\n                } else if (result.link) {\n                    this.walletPayDesc = 'Pay via Link';\n                    this.walletPayLogoName = 'LinkPay';\n                } else {\n                    this.walletPayDesc = 'WalletPay';\n                    this.walletPayLogoName = 'Wallet';\n                }\n                console.log(\"Can make Wallet payments.\");\n            } else {\n                console.log(\"Cannot make Wallet payments.\");\n            }\n        })();\n    }\n  }\n\n  paymentSelected(value: any) {\n    var temp = this.paymentMethod != value\n    if (value > 0) {\n        this.paymentMethod = value;\n        this.emitter.emit(value);\n        var check = document.getElementById(value) as HTMLInputElement\n        if (check) {\n            check.checked = true;\n        }\n        if (temp) {\n            this.payEmitter.emit(true);\n        }\n    }\n}\n\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'lib-parentpayment',\n  template: `\n  <lib-payment-details></lib-payment-details>\n  `,\n  styles: [\n  ]\n})\nexport class ParentpaymentComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'lib-payment-card',\n  templateUrl: './payment-card.component.html',\n  styleUrls: ['./payment-card.component.css']\n})\nexport class PaymentCardComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<p>payment-card works!</p>\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'lib-payment-bank',\n  templateUrl: './payment-bank.component.html',\n  styleUrls: ['./payment-bank.component.css']\n})\nexport class PaymentBankComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<p>payment-bank works!</p>\n","import { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\nimport { ParentpaymentComponent } from './parentpayment.component';\nimport { PaymentDetailsComponent } from './payment-details/payment-details.component';\nimport { PaymentCardComponent } from './payment-details/payment-card/payment-card.component';\nimport { PaymentBankComponent } from './payment-details/payment-bank/payment-bank.component';\n\n\n\n@NgModule({\n  declarations: [\n    ParentpaymentComponent,\n    PaymentDetailsComponent,\n    PaymentCardComponent,\n    PaymentBankComponent\n  ],\n  imports: [\n  ],\n  schemas:[\n    CUSTOM_ELEMENTS_SCHEMA\n  ],\n  exports: [\n    ParentpaymentComponent\n  ]\n})\nexport class ParentpaymentModule { }\n","/*\n * Public API Surface of parentpayment\n */\n\nexport * from './lib/parentpayment.service';\nexport * from './lib/parentpayment.component';\nexport * from './lib/parentpayment.module';\nexport * from './lib/payment-details/payment-details.component';\nexport * from './lib/payment-details/payment-card/payment-card.component';\nexport * from './lib/payment-details/payment-bank/payment-bank.component';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["i0.ɵɵelementStart","i0.ɵɵlistener","i0.ɵɵelement","i0.ɵɵtext","i0.ɵɵelementEnd","i0.ɵɵtemplate","i0.ɵɵadvance","i0.ɵɵtextInterpolate","i0.ɵɵproperty"],"mappings":"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"}