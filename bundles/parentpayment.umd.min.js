!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core")):"function"==typeof define&&define.amd?define("parentpayment",["exports","@angular/core"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).parentpayment={},e.ng.core)}(this,(function(e,t){"use strict";var n=function(){};n.ɵfac=function(e){return new(e||n)},n.ɵprov=t.ɵɵdefineInjectable({token:n,factory:n.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&t.ɵsetClassMetadata(n,[{type:t.Injectable,args:[{providedIn:"root"}]}],(function(){return[]}),null);function a(e,t,n,a){return new(n||(n=Promise))((function(o,r){function i(e){try{p(a.next(e))}catch(e){r(e)}}function l(e){try{p(a.throw(e))}catch(e){r(e)}}function p(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}p((a=a.apply(e,t||[])).next())}))}function o(e,t){var n,a,o,r,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(l){return function(p){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,l[0]&&(i=0)),i;)try{if(n=1,a&&(o=2&l[0]?a.return:l[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,l[1])).done)return o;switch(a=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,a=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==l[0]&&2!==l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],a=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,p])}}}Object.create;Object.create;"function"==typeof SuppressedError&&SuppressedError;function r(e,n){if(1&e){var a=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",7),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(a),t.ɵɵnextContext().paymentSelected(2)})),t.ɵɵelement(1,"input",15),t.ɵɵelementStart(2,"span",9),t.ɵɵtext(3,"Debit or credit card"),t.ɵɵelementEnd(),t.ɵɵelement(4,"img",10),t.ɵɵelementEnd()}}function i(e,n){1&e&&t.ɵɵelement(0,"lib-payment-bank-details")}function l(e,n){1&e&&t.ɵɵelement(0,"lib-payment-card-details")}function p(e,n){1&e&&(t.ɵɵelementStart(0,"div",16),t.ɵɵelementStart(1,"div",17),t.ɵɵtext(2," Oops. Sorry, we are unable to process your payment. "),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"div",18),t.ɵɵtext(4," An error has occurred while attempting to process your order. Please try again or try another payment method. "),t.ɵɵelementEnd(),t.ɵɵelementEnd())}var d=function(){function e(){this.paymentMethodType="Bank transfer",this.canDoWalletPay=!1,this.walletPayLogoName="",this.walletPayDesc="",this.paymentMethod=1,this.emitter=new t.EventEmitter,this.payEmitter=new t.EventEmitter}return e.prototype.ngOnInit=function(){},e.prototype.canWalletPay=function(){var e=this;if(this.canDoWalletPay=!1,this.userData.isWalletPayEnabled=!0,this.userData.isStripeEnabled&&this.userData.isWalletPayEnabled){var t=window.Stripe(atob(this.userData.pk_token),{stripeAccount:this.userData.stripeConnectedAccountId}).paymentRequest({country:this.userData.clientDetails.countryNameCode,currency:this.userData.currencyCode.toLowerCase(),total:{label:"Demo total",amount:1},requestPayerName:!0,requestPayerEmail:!0});a(e,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return[4,t.canMakePayment()];case 1:return e=n.sent(),console.log("canMakePayment",e),e?(this.canDoWalletPay=!0,e.applePay?(this.walletPayDesc="Apple Pay",this.walletPayLogoName="ApplePay"):e.googlePay?(this.walletPayDesc="Google Pay",this.walletPayLogoName="GooglePay"):e.link?(this.walletPayDesc="Pay via Link",this.walletPayLogoName="LinkPay"):(this.walletPayDesc="WalletPay",this.walletPayLogoName="Wallet"),console.log("Can make Wallet payments.")):console.log("Cannot make Wallet payments."),[2]}}))}))}},e.prototype.paymentSelected=function(e){var t=this.paymentMethod!=e;if(e>0){this.paymentMethod=e,this.emitter.emit(e);var n=document.getElementById(e);n&&(n.checked=!0),t&&this.payEmitter.emit(!0)}},e}();d.ɵfac=function(e){return new(e||d)},d.ɵcmp=t.ɵɵdefineComponent({type:d,selectors:[["lib-payment-details"]],outputs:{emitter:"emitter",payEmitter:"payEmitter"},decls:24,vars:6,consts:[[1,"row","pay-body"],[1,"pay-title-box"],[1,"pay-title"],[1,"pay-details"],[1,"pay-selection"],[1,"col","pay-width"],[1,"row","width-q"],[1,"col","pay-btn",3,"click"],["type","radio","name","payWith","id","1"],[1,"pay-btn-text"],["src","","alt","",1,"icon-align"],["class","col pay-btn",3,"click",4,"ngIf"],[4,"ngIf"],["type","radio","name","payWith","id","3"],["class","row pay-body error-body",4,"ngIf"],["type","radio","name","payWith","id","2"],[1,"row","pay-body","error-body"],[1,"error-title"],[1,"error-content"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵelementStart(1,"div",1),t.ɵɵelementStart(2,"div",2),t.ɵɵtext(3,"Payment details"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"div",3),t.ɵɵtext(5,"Please fill the information below about your payment method"),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(6,"div",4),t.ɵɵelementStart(7,"div",5),t.ɵɵtext(8,"Pay with"),t.ɵɵelementEnd(),t.ɵɵelementStart(9,"div",6),t.ɵɵelementStart(10,"div",7),t.ɵɵlistener("click",(function(){return n.paymentSelected(1)})),t.ɵɵelement(11,"input",8),t.ɵɵelementStart(12,"span",9),t.ɵɵtext(13),t.ɵɵelementEnd(),t.ɵɵelement(14,"img",10),t.ɵɵelementEnd(),t.ɵɵtemplate(15,r,5,0,"div",11),t.ɵɵelementEnd(),t.ɵɵtemplate(16,i,1,0,"lib-payment-bank-details",12),t.ɵɵtemplate(17,l,1,0,"lib-payment-card-details",12),t.ɵɵelementStart(18,"div",7),t.ɵɵlistener("click",(function(){return n.paymentSelected(3)})),t.ɵɵelement(19,"input",13),t.ɵɵelementStart(20,"span",9),t.ɵɵtext(21),t.ɵɵelementEnd(),t.ɵɵelement(22,"img",10),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵtemplate(23,p,5,0,"div",14)),2&e&&(t.ɵɵadvance(13),t.ɵɵtextInterpolate(n.paymentMethodType),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.paymentMethodAllowed>=2),t.ɵɵadvance(1),t.ɵɵproperty("ngIf","1"==n.paymentMethod),t.ɵɵadvance(1),t.ɵɵproperty("ngIf","2"==n.paymentMethod),t.ɵɵadvance(4),t.ɵɵtextInterpolate(n.walletPayDesc),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",0==n.paymentMethod))},styles:[".pay-body[_ngcontent-%COMP%]{border:1px solid var(--primaryBorderColor);box-shadow:0 4px 8px rgba(0,0,0,.04),0 0 2px rgba(0,0,0,.06),0 0 1px rgba(0,0,0,.04);border-radius:4px;margin:24px;overflow:hidden}.error-body[_ngcontent-%COMP%]{text-align:center;height:280px}.error-body[_ngcontent-%COMP%]   .error-title[_ngcontent-%COMP%]{font-weight:700;font-size:14px;line-height:20px;color:#f2994a;padding-top:120px;padding-bottom:12px}.error-body[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]{font-weight:400;font-size:12px;line-height:20px;color:var(--primaryTextColor)}.pay-title-box[_ngcontent-%COMP%]{background:var(--titleBarBackground);width:100%;padding:16px 24.5px}.pay-title[_ngcontent-%COMP%]{font-weight:700;font-size:16px;line-height:24px;color:var(--titleBarFontColor)}.pay-details[_ngcontent-%COMP%]{font-size:14px;line-height:20px;color:var(--titleBarSecondaryFontColour);padding-top:12px}.pay-selection[_ngcontent-%COMP%]{width:100%;padding:24px}.width-q[_ngcontent-%COMP%]{margin:0;gap:24px}.pay-width[_ngcontent-%COMP%]{font-weight:700;font-size:16px;padding-bottom:8px}.pay-btn[_ngcontent-%COMP%], .pay-width[_ngcontent-%COMP%]{color:var(--primaryTextColor)}.pay-btn[_ngcontent-%COMP%]{background:#fff;border:1px solid var(--primaryBorderColor);border-radius:4px;font-size:14px;display:flex;align-items:center;cursor:pointer;margin-bottom:0;padding-right:18px}.pay-btn-active[_ngcontent-%COMP%]{border:1px solid var(--secondaryButtonColour)}.pay-btn-text[_ngcontent-%COMP%]{font-size:14px;color:var(--primaryTextColor);padding:8px 8px 8px 16px;width:95%}.icon-align[_ngcontent-%COMP%]{width:20px;height:19px}.paymentCompleted[_ngcontent-%COMP%]{padding:0}@media (max-width:578px){.pay-body[_ngcontent-%COMP%]{border:none;box-shadow:none;margin:16px 0 0;border-radius:0}.pay-title-box[_ngcontent-%COMP%]{padding:22px 16px}.pay-selection[_ngcontent-%COMP%]{padding:16px}}@media (max-width:784px){.pay-btn[_ngcontent-%COMP%]{min-width:100%;padding-right:16px;padding-left:12px}.width-q[_ngcontent-%COMP%]{gap:12px}.pay-width[_ngcontent-%COMP%]{padding-bottom:12px}.pay-details[_ngcontent-%COMP%]{padding-top:8px}}"]}),("undefined"==typeof ngDevMode||ngDevMode)&&t.ɵsetClassMetadata(d,[{type:t.Component,args:[{selector:"lib-payment-details",templateUrl:"./payment-details.component.html",styleUrls:["./payment-details.component.scss"]}]}],(function(){return[]}),{emitter:[{type:t.Output}],payEmitter:[{type:t.Output}]});var c=function(){function e(){}return e.prototype.ngOnInit=function(){},e}();c.ɵfac=function(e){return new(e||c)},c.ɵcmp=t.ɵɵdefineComponent({type:c,selectors:[["lib-parentpayment"]],decls:1,vars:0,template:function(e,n){1&e&&t.ɵɵelement(0,"lib-payment-details")},directives:[d],encapsulation:2}),("undefined"==typeof ngDevMode||ngDevMode)&&t.ɵsetClassMetadata(c,[{type:t.Component,args:[{selector:"lib-parentpayment",template:"\n  <lib-payment-details></lib-payment-details>\n  ",styles:[]}]}],(function(){return[]}),null);var s=function(){function e(){}return e.prototype.ngOnInit=function(){},e}();s.ɵfac=function(e){return new(e||s)},s.ɵcmp=t.ɵɵdefineComponent({type:s,selectors:[["lib-payment-card"]],decls:2,vars:0,template:function(e,n){1&e&&(t.ɵɵelementStart(0,"p"),t.ɵɵtext(1,"payment-card works!"),t.ɵɵelementEnd())},styles:[""]}),("undefined"==typeof ngDevMode||ngDevMode)&&t.ɵsetClassMetadata(s,[{type:t.Component,args:[{selector:"lib-payment-card",templateUrl:"./payment-card.component.html",styleUrls:["./payment-card.component.css"]}]}],(function(){return[]}),null);var y=function(){function e(){}return e.prototype.ngOnInit=function(){},e}();y.ɵfac=function(e){return new(e||y)},y.ɵcmp=t.ɵɵdefineComponent({type:y,selectors:[["lib-payment-bank"]],decls:2,vars:0,template:function(e,n){1&e&&(t.ɵɵelementStart(0,"p"),t.ɵɵtext(1,"payment-bank works!"),t.ɵɵelementEnd())},styles:[""]}),("undefined"==typeof ngDevMode||ngDevMode)&&t.ɵsetClassMetadata(y,[{type:t.Component,args:[{selector:"lib-payment-bank",templateUrl:"./payment-bank.component.html",styleUrls:["./payment-bank.component.css"]}]}],(function(){return[]}),null);var m=function(){};m.ɵfac=function(e){return new(e||m)},m.ɵmod=t.ɵɵdefineNgModule({type:m}),m.ɵinj=t.ɵɵdefineInjector({imports:[[]]}),("undefined"==typeof ngJitMode||ngJitMode)&&t.ɵɵsetNgModuleScope(m,{declarations:[c,d,s,y],exports:[c]}),("undefined"==typeof ngDevMode||ngDevMode)&&t.ɵsetClassMetadata(m,[{type:t.NgModule,args:[{declarations:[c,d,s,y],imports:[],schemas:[t.CUSTOM_ELEMENTS_SCHEMA],exports:[c]}]}],null,null),e.ParentpaymentComponent=c,e.ParentpaymentModule=m,e.ParentpaymentService=n,e.PaymentBankComponent=y,e.PaymentCardComponent=s,e.PaymentDetailsComponent=d,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=parentpayment.umd.min.js.map